name: build hugo document
on:
  push:
    branches:
      - 'master'
    # å¾Œã§ paths: ã®è¨­å®šã‚’ã™ã‚‹
jobs:
  main:
    name: build hugo document
    runs-on: ubuntu-latest
    steps:
      # submodule ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ git clone --recursive ã‚’ã¤ã‘ã‚‹
      - name: Checkout Repository
        uses: actions/checkout@v2
        with:
          ref: master
          submodules: 'true'
      # Identity ã‚’è¨­å®š
      - name: set identity
        run: |
          git config --global user.email "bot@example.com"
          git config --global user.name "bot"
      - name: Set up Ubuntu 20.04 environment
        run: |
          sudo apt update
          sudo apt -y upgrade
          sudo apt install hugo
      - name: build hugo document
        run: |
          hugo
      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./docs/
          # docs ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä½œã‚‰ã‚Œã¦ã„ã‚‹ã¯ãš
          # see peaceiris/actions-gh-pages: GitHub Actions for GitHub Pages ğŸš€ Deploy static files and publish your site easily. Static-Site-Generators-friendly. https://github.com/peaceiris/actions-gh-pages

